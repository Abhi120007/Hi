<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Birthday Bestie! üíñ</title>
  <style>
    /* ========= Global Reset & Styles ========= */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; overflow-x: hidden; position: relative; }

    /* ========= Transition Overlay (Page 1 -> 2) ========= */
    #transitionOverlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #add8e6;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 2000;
    }
    #transitionOverlay h2 {
      font-size: 3rem;
      color: #0033cc;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
      animation: popIn 1.5s ease-in-out;
      margin-bottom: 20px;
    }
    .cat-run {
      width: 80px; height: 80px;
      background: url("https://media.giphy.com/media/v6aOjy0Qo1fIA/giphy.gif") no-repeat center center/cover;
    }
    @keyframes popIn {
      0% { transform: scale(0); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* ========= Page 1: Landing Page ========= */
    .page1 {
      height: 100vh;
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      animation: fadeIn 1.5s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .main-btn {
      padding: 20px 40px;
      font-size: 2rem;
      background: #ff69b4;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      color: white;
      transition: transform 0.3s;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .main-btn:hover {
      transform: scale(1.1) rotate(5deg);
      background: #ff1493;
    }
    .page1 p {
      margin-top: 20px;
      font-size: 1.2rem;
      color: #666;
    }

    /* ========= Page 2: Flower Garden ========= */
    .page2 {
      display: none;
      height: 100vh;
      background: linear-gradient(45deg, #a8edea, #fed6e3);
      position: relative;
      overflow: hidden;
    }
    .page2-header {
      position: absolute; top: 20px; left: 50%;
      transform: translateX(-50%);
      text-align: center;
      color: #333;
      z-index: 3;
    }
    .page2-header h2 { font-size: 2rem; margin-bottom: 5px; }
    .page2-header p { font-size: 1rem; color: #555; }
    .flower-garden {
      display: flex; justify-content: space-around; align-items: flex-end;
      height: 100%; padding: 20px; z-index: 2;
    }
    .flower {
      position: relative;
      width: 200px; height: 400px;
      animation: sway 3s ease-in-out infinite alternate;
    }
    @keyframes sway {
      from { transform: rotate(-2deg); }
      to { transform: rotate(2deg); }
    }
    .stem {
      position: absolute;
      left: 95px;
      width: 10px; height: 0;
      background: #228B22;
      animation: growStem 2s forwards;
    }
    @keyframes growStem {
      from { height: 0; }
      to { height: 250px; }
    }
    .petals {
      position: absolute;
      bottom: 200px; left: 50px;
      width: 100px; height: 100px;
      opacity: 0;
      animation: bloom 1s forwards;
      animation-delay: 2s;
    }
    @keyframes bloom {
      from { transform: scale(0); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .petal {
      position: absolute;
      font-size: 2rem;
      animation: float 3s infinite alternate;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(10deg); }
    }
    .center-btn {
      position: absolute;
      bottom: 210px; left: 90px;
      width: 30px; height: 30px;
      background: gold;
      border: none; border-radius: 50%;
      cursor: pointer; opacity: 0;
      animation: appear 1s forwards;
      animation-delay: 3s;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @keyframes appear {
      from { opacity: 0; transform: scale(0); }
      to { opacity: 1; transform: scale(1); }
    }
    /* ========= Modals ========= */
    .modal {
      display: none;
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      padding: 30px;
      background: rgba(255,255,255,0.95);
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0,0,0,0.2);
      max-width: 400px;
      z-index: 1000;
      transition: transform 0.3s ease-in-out;
      text-align: center;
    }
    .modal.show { transform: translate(-50%, -50%) scale(1); }

    /* ========= Page 3: Final Celebration (Space Theme) ========= */
    .final-page {
      display: none;
      height: 100vh;
      background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
      justify-content: center; align-items: center;
      flex-direction: column;
      padding: 20px; text-align: center;
      position: relative; overflow: hidden;
      z-index: 1;
    }
    .final-page h1 {
      font-size: 3rem; color: #fff; margin-bottom: 20px;
      text-shadow: 0 0 20px #ff6b6b;
      animation: pulseGlow 2s infinite;
    }
    @keyframes pulseGlow {
      0%, 100% { text-shadow: 0 0 20px #ff6b6b, 0 0 30px #ff6b6b, 0 0 40px #ff6b6b; }
      50% { text-shadow: 0 0 30px #ff6b6b, 0 0 40px #ff6b6b, 0 0 50px #ff6b6b; }
    }
    #message {
      max-width: 600px;
      color: #ddd;
      font-size: 1.2rem;
      margin-bottom: 20px;
      z-index: 1;
    }
    .celebration-emoji {
      position: fixed;
      font-size: 2rem;
      z-index: 3; /* Increased z-index for the button's emoji storm */
      animation: splash 2s ease-out forwards;
    }
    @keyframes splash {
      0% {
        transform: scale(0) rotate(0deg) translate(0, 0);
        opacity: 1;
      }
      100% {
        transform: scale(1.5) rotate(360deg) translate(var(--dx), var(--dy));
        opacity: 0;
      }
    }
    .back-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 3;
    }
    /* ========= Starfield for Final Page ========= */
    .starfield {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      overflow: hidden;
      z-index: 0;
    }
    .star {
      position: absolute;
      background: #fff;
      border-radius: 50%;
      opacity: 0.8;
      animation: twinkle 3s infinite ease-in-out;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0.5; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.5); }
    }
  </style>
</head>
<body>
  <!-- ========= Transition Overlay ========= -->
  <div id="transitionOverlay">
    <h2>Blue Lays Lover</h2>
    <div class="cat-run"></div>
  </div>

  <!-- ========= Page 1: Landing Page ========= -->
  <div class="page1" id="page1">
    <button class="main-btn" onclick="startTransition()">Click for Magic! ‚ú®</button>
    <p>Made with üíñ by Your Bestie</p>
  </div>

  <!-- ========= Page 2: Flower Garden ========= -->
  <div class="page2" id="page2">
    <div class="page2-header">
      <h2>Enchanted Flower Garden</h2>
      <p>Enjoy the magic below!</p>
    </div>
    <div class="flower-garden">
      <!-- Left Flower -->
      <div class="flower">
        <div class="stem"></div>
        <div class="petals">
          <div class="petal" style="top: 10px; left: 30px;">üå∏</div>
          <div class="petal" style="top: 50px; left: 0px;">üåº</div>
          <div class="petal" style="top: 30px; left: 60px;">üåª</div>
        </div>
        <button class="center-btn" onclick="showModal('left')"></button>
      </div>
      <!-- Center Flower (navigates to Final Page) -->
      <div class="flower">
        <div class="stem"></div>
        <div class="petals">
          <div class="petal" style="top: 10px; left: 30px;">üåπ</div>
          <div class="petal" style="top: 50px; left: 0px;">üíÆ</div>
          <div class="petal" style="top: 30px; left: 60px;">üèµÔ∏è</div>
        </div>
        <button class="center-btn" onclick="showFinalPage()"></button>
      </div>
      <!-- Right Flower -->
      <div class="flower">
        <div class="stem"></div>
        <div class="petals">
          <div class="petal" style="top: 10px; left: 30px;">üå∫</div>
          <div class="petal" style="top: 50px; left: 0px;">üå∑</div>
          <div class="petal" style="top: 30px; left: 60px;">ü•Ä</div>
        </div>
        <button class="center-btn" onclick="showModal('right')"></button>
      </div>
    </div>
    <!-- Left Modal -->
    <div id="leftModal" class="modal">
      <h2>To My Amazing Bestie! üíñ</h2>
      <p>You make every day brighter with your smile! üåû</p>
      <button onclick="closeModal()">Close üå∏</button>
    </div>
    <!-- Right Modal -->
    <div id="rightModal" class="modal">
      <h2>Special Message! üíå</h2>
      <p>You're the sprinkles on my cupcake of life! üßÅ</p>
      <button onclick="closeModal()">Close üå∫</button>
    </div>
  </div>

  <!-- ========= Page 3: Final Celebration (Space Theme) ========= -->
  <div class="final-page" id="finalPage">
    <div class="starfield" id="starfield"></div>
    <h1>Happy Birthday! üéâ</h1>
    <div id="message">
      Happy Birthday, Priyal! Today is all about celebrating you and the radiant joy you bring into our lives. I hope your day is filled with laughter, warm hugs, and moments that make your heart sing. May every smile remind you of how deeply you are cherished, and every surprise spark a new dream. And remember, whenever you need someone, you can count on me to be there‚Äîa friend always ready to share in your happiness and support you through any challenge. Enjoy every moment of your special day, knowing that you are loved beyond measure!

    </div>
    <!-- Audio: Replace with your own song file if desired -->
    <audio id="birthdayMusic" controls>
      <source src="happy-birthday.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>
    <!-- More Celebration Button with increased z-index -->
    <button onclick="createEmojiStorm()" style="position: relative; z-index: 3; margin-top: 20px; padding: 10px 20px; background: white; border: none; border-radius: 20px; cursor: pointer;">
      More Celebration! üéä
    </button>
    <button class="back-btn" onclick="goBackToFlowers()">Back to Flowers</button>
  </div>

  <script>
    /* ===== Transition: Page 1 -> Page 2 ===== */
    function startTransition() {
      const overlay = document.getElementById('transitionOverlay');
      overlay.style.display = 'flex';
      setTimeout(() => {
        document.getElementById('page1').style.display = 'none';
        overlay.style.display = 'none';
        document.getElementById('page2').style.display = 'block';
      }, 2000);
    }

    /* ===== Modals ===== */
    function showModal(type) {
      const modal = document.getElementById(type + 'Modal');
      modal.style.display = 'block';
      setTimeout(() => modal.classList.add('show'), 10);
    }
    function closeModal() {
      document.querySelectorAll('.modal').forEach(modal => {
        modal.classList.remove('show');
        setTimeout(() => { modal.style.display = 'none'; }, 300);
      });
    }

    /* ===== Transition: Page 2 -> Page 3 ===== */
    function showFinalPage() {
      document.getElementById('page2').style.display = 'none';
      document.getElementById('finalPage').style.display = 'flex';
      document.getElementById('birthdayMusic').play();
      createStarfield();
    }

    /* ===== Emoji Storm on Final Page ===== */
    function createEmojiStorm() {
      console.log("Emoji storm starting"); // Debug log
      const emojis = ["üéâ", "üéÇ", "üéÅ", "üéà", "‚ú®", "üíñ", "üå∏", "ü•≥"];
      for (let i = 0; i < 50; i++) {
        const emoji = document.createElement('div');
        emoji.className = 'celebration-emoji';
        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        // Random start horizontal position (vw)
        emoji.style.left = Math.random() * 100 + 'vw';
        // Set random splash offsets via CSS variables
        const dx = (Math.random() * 200 - 100) + 'px';
        const dy = (Math.random() * 200 - 100) + 'px';
        emoji.style.setProperty('--dx', dx);
        emoji.style.setProperty('--dy', dy);
        document.body.appendChild(emoji);
        emoji.addEventListener('animationend', () => {
          emoji.remove();
        });
      }
    }

    /* ===== Back to Flowers (Page 3 -> Page 2) ===== */
    function goBackToFlowers() {
      document.getElementById('birthdayMusic').pause();
      document.getElementById('finalPage').style.display = 'none';
      document.getElementById('page2').style.display = 'block';
    }

    /* ===== Create Starfield on Final Page ===== */
    function createStarfield() {
      const starfield = document.getElementById('starfield');
      starfield.innerHTML = ''; // Clear previous stars
      const starCount = 100;
      for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + 'vw';
        star.style.top = Math.random() * 100 + 'vh';
        const size = Math.random() * 2 + 1;
        star.style.width = size + 'px';
        star.style.height = size + 'px';
        star.style.animationDelay = Math.random() * 3 + 's';
        starfield.appendChild(star);
      }
    }
  </script>
</body>
</html>
